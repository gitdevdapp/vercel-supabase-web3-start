# 🌐 DevDapp.com Domain Configuration Guide

## 📋 Overview
Complete configuration settings for devdapp.com domain integration with Vercel and Supabase authentication.

---

## 🔧 Vercel Domain Configuration

### Step 1: Add Custom Domain in Vercel
```
Vercel Dashboard > Project Settings > Domains

Primary Domain: devdapp.com
Redirect: www.devdapp.com → devdapp.com (optional)
```

### Step 2: DNS Configuration
Configure these DNS records at your domain registrar:

```dns
# Primary domain
Type: CNAME
Name: @
Value: cname.vercel-dns.com
TTL: 300

# WWW subdomain (optional)
Type: CNAME
Name: www
Value: cname.vercel-dns.com
TTL: 300
```

### Step 3: SSL Certificate
- ✅ **Automatic**: Vercel provisions SSL automatically
- ✅ **Renewal**: Auto-renewal before expiration
- ✅ **HTTPS Redirect**: Automatic HTTP to HTTPS

---

## 🔐 Supabase Authentication Configuration

### Site URL Configuration
```
Supabase Dashboard > Authentication > URL Configuration

Site URL:
https://devdapp.com
```

### Redirect URLs Configuration
Copy and paste these exact URLs into Supabase:

#### Production URLs (devdapp.com)
```
https://devdapp.com/auth/callback
https://devdapp.com/auth/confirm
https://devdapp.com/auth/login
https://devdapp.com/auth/sign-up
https://devdapp.com/auth/forgot-password
https://devdapp.com/auth/update-password
https://devdapp.com/protected/profile
https://devdapp.com/
```

#### Preview Deployment URLs (Vercel)
```
https://vercel-supabase-web3-*.vercel.app/auth/callback
https://vercel-supabase-web3-*.vercel.app/auth/confirm
https://vercel-supabase-web3-*.vercel.app/auth/login
https://vercel-supabase-web3-*.vercel.app/auth/sign-up
https://vercel-supabase-web3-*.vercel.app/auth/forgot-password
https://vercel-supabase-web3-*.vercel.app/auth/update-password
https://vercel-supabase-web3-*.vercel.app/protected/profile
https://vercel-supabase-web3-*.vercel.app/
```

#### Development URLs (Local)
```
http://localhost:3000/auth/callback
http://localhost:3000/auth/confirm
http://localhost:3000/auth/login
http://localhost:3000/auth/sign-up
http://localhost:3000/auth/forgot-password
http://localhost:3000/auth/update-password
http://localhost:3000/protected/profile
http://localhost:3000/
```

---

## 🔑 Environment Variables for devdapp.com

### Vercel Environment Variables
Configure in: **Vercel Dashboard > Project Settings > Environment Variables**

#### Production Environment
```bash
# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_OR_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Domain Configuration (optional)
NEXT_PUBLIC_APP_URL=https://devdapp.com
NEXT_PUBLIC_SITE_NAME=DevDapp
```

#### Preview Environment
```bash
# Same as Production, but with preview domain
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_OR_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Preview domain (auto-generated by Vercel)
NEXT_PUBLIC_APP_URL=https://vercel-supabase-web3-*.vercel.app
```

#### Development Environment
```bash
# Local development
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_OR_ANON_KEY=your-anon-key-here

# Local domain
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

---

## 🧪 Testing & Verification

### Step 1: DNS Propagation Check
```bash
# Check DNS resolution
nslookup devdapp.com
dig devdapp.com

# Expected result: Points to Vercel's servers
```

### Step 2: SSL Certificate Verification
```bash
# Check SSL certificate
curl -I https://devdapp.com

# Expected headers:
# HTTP/2 200
# server: Vercel
# x-vercel-cache: MISS
```

### Step 3: Authentication Flow Testing

#### User Registration Test
1. Navigate to `https://devdapp.com/auth/sign-up`
2. Register with test email
3. Check email for confirmation link
4. Confirm email (should redirect to `https://devdapp.com/auth/confirm`)
5. Verify automatic profile creation

#### Login/Logout Test
1. Navigate to `https://devdapp.com/auth/login`
2. Login with test credentials
3. Verify redirect to profile page
4. Test logout functionality
5. Verify session persistence

#### Password Reset Test
1. Navigate to `https://devdapp.com/auth/forgot-password`
2. Request password reset
3. Check email for reset link
4. Complete password reset flow
5. Verify new password works

### Step 4: Profile Functionality Test
1. Access `https://devdapp.com/protected/profile`
2. Verify profile information displays
3. Test profile editing
4. Verify data persistence
5. Test mobile responsiveness

---

## 🔧 Advanced Configuration Options

### Custom Email Templates
Configure in Supabase Dashboard > Authentication > Email Templates:

```html
<!-- Email Confirmation Template -->
<h2>Welcome to DevDapp!</h2>
<p>Click the link below to confirm your email:</p>
<a href="{{ .ConfirmationURL }}">Confirm Email</a>

<!-- Password Reset Template -->
<h2>Reset your DevDapp password</h2>
<p>Click the link below to reset your password:</p>
<a href="{{ .ConfirmationURL }}">Reset Password</a>
```

### Custom Redirect Handling
```typescript
// lib/auth-helpers.ts
export function getRedirectURL() {
  let url =
    process.env.NEXT_PUBLIC_APP_URL ??
    process.env.NEXT_PUBLIC_VERCEL_URL ??
    'http://localhost:3000';
  
  // Ensure https in production
  if (process.env.NODE_ENV === 'production' && !url.startsWith('https://')) {
    url = `https://${url}`;
  }
  
  // Remove trailing slash
  url = url.replace(/\/$/, '');
  
  return url;
}
```

### Security Headers Configuration
```typescript
// next.config.ts
const nextConfig: NextConfig = {
  async headers() {
    return [
      {
        source: '/(.*)',
        headers: [
          {
            key: 'X-Frame-Options',
            value: 'DENY',
          },
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff',
          },
          {
            key: 'Referrer-Policy',
            value: 'origin-when-cross-origin',
          },
          {
            key: 'Strict-Transport-Security',
            value: 'max-age=31536000; includeSubDomains',
          },
        ],
      },
    ];
  },
};
```

---

## 🚨 Troubleshooting Common Issues

### Issue 1: Domain Not Resolving
**Symptoms**: devdapp.com shows "This site can't be reached"

**Solutions**:
1. Check DNS propagation (can take up to 48 hours)
2. Verify CNAME record points to `cname.vercel-dns.com`
3. Clear DNS cache: `sudo dscacheutil -flushcache`

### Issue 2: SSL Certificate Issues
**Symptoms**: "Not secure" warning or SSL errors

**Solutions**:
1. Wait for Vercel to provision certificate (up to 24 hours)
2. Verify domain ownership in Vercel Dashboard
3. Check for DNS configuration conflicts

### Issue 3: Authentication Redirects Fail
**Symptoms**: "URL not allowed" errors during auth

**Solutions**:
1. Verify all redirect URLs in Supabase configuration
2. Check exact URL format (https, no trailing slashes)
3. Test with both www and non-www versions

### Issue 4: Environment Variables Not Loading
**Symptoms**: "Invalid API key" or connection errors

**Solutions**:
1. Verify environment variables in Vercel Dashboard
2. Check variable names (case-sensitive)
3. Redeploy after environment variable changes

---

## 📊 Monitoring & Analytics

### Performance Monitoring
```bash
# Vercel Analytics
# Enable in: Project Settings > Analytics

# Key metrics to monitor:
# - Core Web Vitals
# - Page load times
# - Deployment success rate
# - Error rate
```

### Custom Analytics Setup
```typescript
// lib/analytics.ts
export function trackEvent(eventName: string, properties: any) {
  if (process.env.NODE_ENV === 'production') {
    // Track user interactions
    console.log('Event:', eventName, properties);
    
    // Integration with analytics service
    // Example: Google Analytics, Mixpanel, etc.
  }
}
```

---

## ✅ Final Verification Checklist

### Domain Configuration
- [ ] ✅ devdapp.com resolves to Vercel
- [ ] ✅ HTTPS certificate active and valid
- [ ] ✅ www redirect configured (if desired)
- [ ] ✅ DNS propagation complete

### Supabase Configuration
- [ ] ✅ Site URL set to https://devdapp.com
- [ ] ✅ All redirect URLs configured
- [ ] ✅ Email templates customized
- [ ] ✅ RLS policies active

### Application Configuration
- [ ] ✅ Environment variables set in Vercel
- [ ] ✅ Auto-deployment from main branch working
- [ ] ✅ Build process completing successfully
- [ ] ✅ All authentication flows tested

### Security & Performance
- [ ] ✅ Security headers configured
- [ ] ✅ Performance monitoring enabled
- [ ] ✅ Error tracking active
- [ ] ✅ Mobile responsiveness verified

---

## 📞 Support Contacts

### Domain Issues
- **Domain Registrar**: Check with your DNS provider
- **Vercel Support**: support@vercel.com or dashboard chat

### Authentication Issues
- **Supabase Support**: Dashboard support or Discord community
- **Documentation**: [Supabase Auth Docs](https://supabase.com/docs/guides/auth)

### Application Issues
- **Project Repository**: Check GitHub issues
- **Local Development**: Review `docs/deployment/` folder

---

**🎯 Configuration Complete!**  
DevDapp.com is now fully configured for production deployment with Supabase authentication.

---

*Last Updated: September 12, 2025*  
*Configuration Version: 1.0*  
*Status: ✅ Ready for Production*
